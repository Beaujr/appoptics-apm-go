warning: no packages being tested depend on matches for pattern github.com/appoptics/appoptics-apm-go/v1/ao/opentracing
2018/07/28 21:44:08 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:44:10 ERROR Invalid service key (token:serviceName): <>. Reporter disabled.
2018/07/28 21:44:10 ERROR Check AppOptics dashboard for your token and use a service name shorter than 256 characters.
=== RUN   TestContext
--- PASS: TestContext (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 1 nodes, 0 edges checked
=== RUN   TestTraceFromContext
--- PASS: TestTraceFromContext (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 2 nodes, 0 edges checked
=== RUN   TestContextIsSampled
--- PASS: TestContextIsSampled (0.00s)
=== RUN   TestNullSpan
--- PASS: TestNullSpan (0.00s)
	graph.go:43: got 3 events
	graph.go:252: Total 5 nodes, 2 edges checked
=== RUN   TestTraceChild
--- PASS: TestTraceChild (0.03s)
	graph.go:43: got 6 events
	graph.go:252: Total 11 nodes, 9 edges checked
=== RUN   TestTraceChildCtx
--- PASS: TestTraceChildCtx (0.03s)
	graph.go:43: got 6 events
	graph.go:252: Total 17 nodes, 16 edges checked
=== RUN   TestNoTraceChild
--- PASS: TestNoTraceChild (0.05s)
=== RUN   TestCacheRPCSpans
--- PASS: TestCacheRPCSpans (0.03s)
	graph.go:43: got 7 events
	graph.go:252: Total 24 nodes, 24 edges checked
=== RUN   TestDocSpanExample
--- PASS: TestDocSpanExample (0.00s)
	graph.go:43: got 11 events
	graph.go:252: Total 35 nodes, 38 edges checked
=== RUN   TestDocSpanExampleCtx
--- PASS: TestDocSpanExampleCtx (0.00s)
	graph.go:43: got 11 events
	graph.go:252: Total 46 nodes, 52 edges checked
=== RUN   TestCustomTransactionNameWithDomain
2018/07/28 21:44:10 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:44:10 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
--- PASS: TestCustomTransactionNameWithDomain (0.03s)
	graph.go:43: got 2 events
	graph.go:252: Total 48 nodes, 53 edges checked
	graph.go:43: got 2 events
	graph.go:252: Total 50 nodes, 54 edges checked
=== RUN   TestHTTPHandler404
--- PASS: TestHTTPHandler404 (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 52 nodes, 55 edges checked
=== RUN   TestHTTPHandler200
2018/07/28 21:44:10 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:44:10 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: false
--- PASS: TestHTTPHandler200 (0.02s)
	graph.go:43: got 2 events
	graph.go:252: Total 54 nodes, 56 edges checked
=== RUN   TestHTTPHandlerNoTrace
--- PASS: TestHTTPHandlerNoTrace (0.00s)
=== RUN   TestHTTPSpan
--- PASS: TestHTTPSpan (0.55s)
=== RUN   TestSingleHTTPSpan
2018/07/28 21:44:11 INFO passed in x-trace indicates that request is not being sampled
--- PASS: TestSingleHTTPSpan (0.00s)
=== RUN   TestTraceHTTP
--- PASS: TestTraceHTTP (0.02s)
	http_instrumentation_test.go:214: server: got request &{GET /test?qs=1 HTTP/1.1 1 1 map[X-Trace:[2B0C74444A609C0FF9DFC54721DF4C9B44C552A36DC3FBFFFC0BA3939401] Accept-Encoding:[gzip] User-Agent:[Go-http-client/1.1]] {} <nil> 0 [] false 127.0.0.1:49466 map[] map[] <nil> map[] 127.0.0.1:49467 /test?qs=1 <nil> <nil> <nil> 0xc420452750}
	graph.go:43: got 8 events
	graph.go:252: Total 62 nodes, 66 edges checked
=== RUN   TestTraceHTTPHelperA
--- PASS: TestTraceHTTPHelperA (0.01s)
	http_instrumentation_test.go:214: server: got request &{GET /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] X-Trace:[2B4EAC42C7AC2DD22BA8C5F7EEB3BC788085561F3A2708135E96BEC56C01] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49468 map[] map[] <nil> map[] 127.0.0.1:49469 /test?qs=1 <nil> <nil> <nil> 0xc420452990}
	graph.go:43: got 8 events
	graph.go:252: Total 70 nodes, 76 edges checked
=== RUN   TestTraceHTTPHelperB
--- PASS: TestTraceHTTPHelperB (0.01s)
	http_instrumentation_test.go:214: server: got request &{GET /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] X-Trace:[2B50FAC63AFA206D3D4F5751BEB5D3383725D1302B9432194BEAB9F8A701] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49470 map[] map[] <nil> map[] 127.0.0.1:49471 /test?qs=1 <nil> <nil> <nil> 0xc42043cb10}
	graph.go:43: got 8 events
	graph.go:252: Total 78 nodes, 86 edges checked
=== RUN   TestTraceHTTP200
--- PASS: TestTraceHTTP200 (0.02s)
	graph.go:43: got 4 events
	graph.go:252: Total 82 nodes, 90 edges checked
=== RUN   TestTraceHTTPHelperA200
--- PASS: TestTraceHTTPHelperA200 (0.02s)
	graph.go:43: got 4 events
	graph.go:252: Total 86 nodes, 94 edges checked
=== RUN   TestTraceHTTPHelperB200
--- PASS: TestTraceHTTPHelperB200 (0.02s)
	graph.go:43: got 4 events
	graph.go:252: Total 90 nodes, 98 edges checked
=== RUN   TestTraceHTTP403
--- PASS: TestTraceHTTP403 (0.00s)
	graph.go:43: got 4 events
	graph.go:252: Total 94 nodes, 102 edges checked
=== RUN   TestTraceHTTPHelperA403
--- PASS: TestTraceHTTPHelperA403 (0.01s)
	graph.go:43: got 4 events
	graph.go:252: Total 98 nodes, 106 edges checked
=== RUN   TestTraceHTTPHelperB403
--- PASS: TestTraceHTTPHelperB403 (0.01s)
	graph.go:43: got 4 events
	graph.go:252: Total 102 nodes, 110 edges checked
=== RUN   TestTraceHTTPPost
--- PASS: TestTraceHTTPPost (0.01s)
	http_instrumentation_test.go:214: server: got request &{POST /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] Content-Length:[0] X-Trace:[2B34003CF64FD45AFB07031B62D1D459A93E979EEA36E25D25E8EB3EDE01] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49484 map[] map[] <nil> map[] 127.0.0.1:49485 /test?qs=1 <nil> <nil> <nil> 0xc420552060}
	graph.go:43: got 8 events
	graph.go:252: Total 110 nodes, 120 edges checked
=== RUN   TestTraceHTTPHelperPostA
--- PASS: TestTraceHTTPHelperPostA (0.01s)
	http_instrumentation_test.go:214: server: got request &{POST /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] Content-Length:[0] X-Trace:[2B12B8808455E2D9ECDA3AF830FDA4BBBAE641A2BF4873CCEE9FB08FA001] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49486 map[] map[] <nil> map[] 127.0.0.1:49487 /test?qs=1 <nil> <nil> <nil> 0xc4200a1860}
	graph.go:43: got 8 events
	graph.go:252: Total 118 nodes, 130 edges checked
=== RUN   TestTraceHTTPHelperPostB
--- PASS: TestTraceHTTPHelperPostB (0.01s)
	http_instrumentation_test.go:214: server: got request &{POST /test?qs=1 HTTP/1.1 1 1 map[Accept-Encoding:[gzip] User-Agent:[Go-http-client/1.1] Content-Length:[0] X-Trace:[2B76F729B56033DD992BFAA6A94D6AF76B951F94A47A99C6FBF1B089DA01]] {} <nil> 0 [] false 127.0.0.1:49488 map[] map[] <nil> map[] 127.0.0.1:49489 /test?qs=1 <nil> <nil> <nil> 0xc4205329c0}
	graph.go:43: got 8 events
	graph.go:252: Total 126 nodes, 140 edges checked
=== RUN   TestTraceHTTPBadRequest
--- PASS: TestTraceHTTPBadRequest (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 128 nodes, 141 edges checked
=== RUN   TestTraceHTTPHelperBadReqA
--- PASS: TestTraceHTTPHelperBadReqA (0.01s)
	graph.go:43: got 2 events
	graph.go:252: Total 130 nodes, 142 edges checked
=== RUN   TestTraceHTTPHelperBadReqB
--- PASS: TestTraceHTTPHelperBadReqB (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 132 nodes, 143 edges checked
=== RUN   TestTraceHTTPPanic
--- PASS: TestTraceHTTPPanic (0.01s)
	http_instrumentation_test.go:258: panicCatcher caught panic panicking!
	graph.go:43: got 7 events
	graph.go:252: Total 139 nodes, 151 edges checked
=== RUN   TestTraceHTTPPanicA
--- PASS: TestTraceHTTPPanicA (0.02s)
	http_instrumentation_test.go:258: panicCatcher caught panic panicking!
	graph.go:43: got 7 events
	graph.go:252: Total 146 nodes, 159 edges checked
=== RUN   TestTraceHTTPPanicB
--- PASS: TestTraceHTTPPanicB (0.02s)
	http_instrumentation_test.go:258: panicCatcher caught panic panicking!
	graph.go:43: got 7 events
	graph.go:252: Total 153 nodes, 167 edges checked
=== RUN   TestTraceHTTPError
--- PASS: TestTraceHTTPError (0.01s)
	graph.go:43: got 5 events
	graph.go:252: Total 158 nodes, 172 edges checked
=== RUN   TestTraceHTTPErrorA
--- PASS: TestTraceHTTPErrorA (0.01s)
	http_instrumentation_test.go:310: JoinResponse err: Get http://0.0.0.0:888888: dial tcp: address 888888: invalid port
	graph.go:43: got 5 events
	graph.go:252: Total 163 nodes, 177 edges checked
=== RUN   TestTraceHTTPErrorB
--- PASS: TestTraceHTTPErrorB (0.01s)
	http_instrumentation_test.go:334: JoinResponse err: Get http://0.0.0.0:888888: dial tcp: address 888888: invalid port
	graph.go:43: got 5 events
	graph.go:252: Total 168 nodes, 182 edges checked
=== RUN   TestTraceHTTPErrorBadRequest
--- PASS: TestTraceHTTPErrorBadRequest (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 170 nodes, 183 edges checked
=== RUN   TestTraceHTTPErrorABadRequest
--- PASS: TestTraceHTTPErrorABadRequest (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 172 nodes, 184 edges checked
=== RUN   TestTraceHTTPErrorBBadRequest
--- PASS: TestTraceHTTPErrorBBadRequest (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 174 nodes, 185 edges checked
=== RUN   TestDoubleWrappedHTTPRequest
--- PASS: TestDoubleWrappedHTTPRequest (0.01s)
	http_instrumentation_test.go:231: server: got request &{GET /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] X-Trace:[2BAE59EEEBF8EA29B944FB717DC4A4A01CC8E081C0FFD0D09871B042BB01] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49499 map[] map[] <nil> map[] 127.0.0.1:49500 /test?qs=1 <nil> <nil> <nil> 0xc42043c000}
	http_instrumentation_test.go:543: response: &{403 Forbidden 403 HTTP/1.1 1 1 map[X-Trace:[2BAE59EEEBF8EA29B944FB717DC4A4A01CC8E081C062D427FC085274F001] Date:[Sun, 29 Jul 2018 04:44:11 GMT] Content-Length:[0]] {} 0 [] false false map[] 0xc4203fb100 <nil>}
	graph.go:43: got 10 events
	graph.go:252: Total 184 nodes, 198 edges checked
=== RUN   TestDistributedApp
--- PASS: TestDistributedApp (0.03s)
	http_instrumentation_test.go:654: Response: &{200 OK 200 HTTP/1.1 1 1 map[X-Trace:[2BFC837A3C7F898FADE9505F5A5DAAE5C821307239D038CEB94EBF0D1201] Date:[Sun, 29 Jul 2018 04:44:11 GMT] Content-Length:[27] Content-Type:[text/plain; charset=utf-8]] 0xc4204bb440 27 [] false false map[] 0xc42038b500 <nil>} BUF {"result":"hello from bob"}
	graph.go:43: got 10 events
	graph.go:252: Total 194 nodes, 211 edges checked
=== RUN   TestConcurrentApp
--- PASS: TestConcurrentApp (0.02s)
	http_instrumentation_test.go:752: Response: &{200 OK 200 HTTP/1.1 1 1 map[Content-Type:[text/plain; charset=utf-8] X-Trace:[2B098D7042DE1DDE47DA7CFD487E958B054386F4E5306EEB36A7C6C4A301] Date:[Sun, 29 Jul 2018 04:44:11 GMT] Content-Length:[81]] 0xc4204bb940 81 [] false false map[] 0xc420166200 <nil>} BUF {"result":"hello from bob"}{"result":"hello from bob"}{"result":"hello from bob"}
	graph.go:43: got 14 events
	graph.go:252: Total 208 nodes, 230 edges checked
=== RUN   TestConcurrentAppNoTrace
2018/07/28 21:44:11 INFO passed in x-trace indicates that request is not being sampled
2018/07/28 21:44:11 INFO passed in x-trace indicates that request is not being sampled
2018/07/28 21:44:11 INFO passed in x-trace indicates that request is not being sampled
--- PASS: TestConcurrentAppNoTrace (0.02s)
=== RUN   TestBeginProfile
--- PASS: TestBeginProfile (0.01s)
	graph.go:43: got 2 events
	graph.go:252: Total 210 nodes, 231 edges checked
=== RUN   TestBeginSpanProfile
--- PASS: TestBeginSpanProfile (0.01s)
	graph.go:43: got 6 events
	graph.go:252: Total 216 nodes, 238 edges checked
=== RUN   TestNoTraceBeginProfile
--- PASS: TestNoTraceBeginProfile (0.00s)
=== RUN   TestTraceErrorBeginProfile
--- PASS: TestTraceErrorBeginProfile (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 217 nodes, 238 edges checked
=== RUN   TestNoTraceBeginSpanProfile
--- PASS: TestNoTraceBeginSpanProfile (0.00s)
=== RUN   TestTraceErrorBeginSpanProfile
--- PASS: TestTraceErrorBeginSpanProfile (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 219 nodes, 239 edges checked
=== RUN   TestTraceMetadata
--- PASS: TestTraceMetadata (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 221 nodes, 240 edges checked
=== RUN   TestNoTraceMetadata
--- PASS: TestNoTraceMetadata (0.00s)
=== RUN   TestTraceMetadataDiff
--- PASS: TestTraceMetadataDiff (0.00s)
=== RUN   TestTraceExample
--- PASS: TestTraceExample (0.05s)
	trace_test.go:179: Reporting unrecognized event KV type
	graph.go:43: got 13 events
	graph.go:252: Total 234 nodes, 255 edges checked
=== RUN   TestTraceExampleCtx
--- PASS: TestTraceExampleCtx (0.07s)
	trace_test.go:189: Reporting unrecognized event KV type
	graph.go:43: got 13 events
	graph.go:252: Total 247 nodes, 270 edges checked
=== RUN   TestNoTraceExample
--- PASS: TestNoTraceExample (0.04s)
=== RUN   TestTraceFromMetadata
--- PASS: TestTraceFromMetadata (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 249 nodes, 272 edges checked
=== RUN   TestNoTraceFromMetadata
--- PASS: TestNoTraceFromMetadata (0.00s)
=== RUN   TestNoTraceFromBadMetadata
2018/07/28 21:44:11 INFO passed in x-trace seems invalid, ignoring
--- PASS: TestNoTraceFromBadMetadata (0.00s)
=== RUN   TestTraceJoin
--- PASS: TestTraceJoin (0.00s)
	graph.go:43: got 4 events
	graph.go:252: Total 253 nodes, 276 edges checked
=== RUN   TestNullTrace
--- PASS: TestNullTrace (0.00s)
PASS
coverage: 49.6% of statements in github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter, github.com/appoptics/appoptics-apm-go/v1/ao/internal/log, github.com/appoptics/appoptics-apm-go/v1/ao/internal/config, github.com/appoptics/appoptics-apm-go/v1/ao/internal/host, github.com/appoptics/appoptics-apm-go/v1/ao, github.com/appoptics/appoptics-apm-go/v1/ao/opentracing
ok  	github.com/appoptics/appoptics-apm-go/v1/ao	4.395s
warning: no packages being tested depend on matches for pattern github.com/appoptics/appoptics-apm-go/v1/ao/opentracing
2018/07/28 21:44:14 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:44:14 ERROR Invalid service key (token:serviceName): <>. Reporter disabled.
2018/07/28 21:44:14 ERROR Check AppOptics dashboard for your token and use a service name shorter than 256 characters.
=== RUN   TestContext
--- PASS: TestContext (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 1 nodes, 0 edges checked
=== RUN   TestTraceFromContext
--- PASS: TestTraceFromContext (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 2 nodes, 0 edges checked
=== RUN   TestContextIsSampled
--- PASS: TestContextIsSampled (0.00s)
=== RUN   TestNullSpan
--- PASS: TestNullSpan (0.00s)
	graph.go:43: got 3 events
	graph.go:252: Total 5 nodes, 2 edges checked
=== RUN   TestTraceChild
--- PASS: TestTraceChild (0.03s)
	graph.go:43: got 6 events
	graph.go:252: Total 11 nodes, 9 edges checked
=== RUN   TestTraceChildCtx
--- PASS: TestTraceChildCtx (0.03s)
	graph.go:43: got 6 events
	graph.go:252: Total 17 nodes, 16 edges checked
=== RUN   TestNoTraceChild
--- PASS: TestNoTraceChild (0.05s)
=== RUN   TestCacheRPCSpans
--- PASS: TestCacheRPCSpans (0.03s)
	graph.go:43: got 7 events
	graph.go:252: Total 24 nodes, 24 edges checked
=== RUN   TestDocSpanExample
--- PASS: TestDocSpanExample (0.01s)
	graph.go:43: got 11 events
	graph.go:252: Total 35 nodes, 38 edges checked
=== RUN   TestDocSpanExampleCtx
--- PASS: TestDocSpanExampleCtx (0.01s)
	graph.go:43: got 11 events
	graph.go:252: Total 46 nodes, 52 edges checked
=== RUN   TestHTTPHandler404
--- PASS: TestHTTPHandler404 (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 48 nodes, 53 edges checked
=== RUN   TestHTTPHandler200
2018/07/28 21:44:14 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:44:14 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: false
--- PASS: TestHTTPHandler200 (0.02s)
	graph.go:43: got 2 events
	graph.go:252: Total 50 nodes, 54 edges checked
=== RUN   TestHTTPHandlerNoTrace
--- PASS: TestHTTPHandlerNoTrace (0.00s)
=== RUN   TestHTTPSpan
--- PASS: TestHTTPSpan (0.55s)
=== RUN   TestSingleHTTPSpan
--- PASS: TestSingleHTTPSpan (0.00s)
=== RUN   TestTraceHTTP
--- PASS: TestTraceHTTP (0.01s)
	http_instrumentation_test.go:214: server: got request &{GET /test?qs=1 HTTP/1.1 1 1 map[X-Trace:[2B26B8AD113A94142D1FBECAD73ACA44D9F4AF8F1D0F0E0105C2A8FE3101] Accept-Encoding:[gzip] User-Agent:[Go-http-client/1.1]] {} <nil> 0 [] false 127.0.0.1:49512 map[] map[] <nil> map[] 127.0.0.1:49513 /test?qs=1 <nil> <nil> <nil> 0xc4202eb830}
	graph.go:43: got 8 events
	graph.go:252: Total 58 nodes, 64 edges checked
=== RUN   TestTraceHTTPHelperA
--- PASS: TestTraceHTTPHelperA (0.01s)
	http_instrumentation_test.go:214: server: got request &{GET /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] X-Trace:[2BBFE2F6220A4A8A57BEBCC31A01A93C6ACCC4C51F4C045F6464096E5101] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49514 map[] map[] <nil> map[] 127.0.0.1:49515 /test?qs=1 <nil> <nil> <nil> 0xc420341f80}
	graph.go:43: got 8 events
	graph.go:252: Total 66 nodes, 74 edges checked
=== RUN   TestTraceHTTPHelperB
--- PASS: TestTraceHTTPHelperB (0.02s)
	http_instrumentation_test.go:214: server: got request &{GET /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] X-Trace:[2BA5F86FC0318AC292D80687531BDDF5B4871F4925FA0124018174AD7501] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49516 map[] map[] <nil> map[] 127.0.0.1:49517 /test?qs=1 <nil> <nil> <nil> 0xc42027aba0}
	graph.go:43: got 8 events
	graph.go:252: Total 74 nodes, 84 edges checked
=== RUN   TestTraceHTTP200
--- PASS: TestTraceHTTP200 (0.02s)
	graph.go:43: got 4 events
	graph.go:252: Total 78 nodes, 88 edges checked
=== RUN   TestTraceHTTPHelperA200
--- PASS: TestTraceHTTPHelperA200 (0.02s)
	graph.go:43: got 4 events
	graph.go:252: Total 82 nodes, 92 edges checked
=== RUN   TestTraceHTTPHelperB200
--- PASS: TestTraceHTTPHelperB200 (0.02s)
	graph.go:43: got 4 events
	graph.go:252: Total 86 nodes, 96 edges checked
=== RUN   TestTraceHTTP403
--- PASS: TestTraceHTTP403 (0.01s)
	graph.go:43: got 4 events
	graph.go:252: Total 90 nodes, 100 edges checked
=== RUN   TestTraceHTTPHelperA403
--- PASS: TestTraceHTTPHelperA403 (0.01s)
	graph.go:43: got 4 events
	graph.go:252: Total 94 nodes, 104 edges checked
=== RUN   TestTraceHTTPHelperB403
--- PASS: TestTraceHTTPHelperB403 (0.01s)
	graph.go:43: got 4 events
	graph.go:252: Total 98 nodes, 108 edges checked
=== RUN   TestTraceHTTPPost
--- PASS: TestTraceHTTPPost (0.01s)
	http_instrumentation_test.go:214: server: got request &{POST /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] Content-Length:[0] X-Trace:[2BAF77D9E7CAD0EF60AE4ADE8D36D7C7D2C652F0A8A96E74386873D4E201] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49530 map[] map[] <nil> map[] 127.0.0.1:49531 /test?qs=1 <nil> <nil> <nil> 0xc420542240}
	graph.go:43: got 8 events
	graph.go:252: Total 106 nodes, 118 edges checked
=== RUN   TestTraceHTTPHelperPostA
--- PASS: TestTraceHTTPHelperPostA (0.01s)
	http_instrumentation_test.go:214: server: got request &{POST /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] Content-Length:[0] X-Trace:[2B6F706553F37F3F9F1A3C985391CB67B271A671B4C3E5E91907BA0F6501] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49532 map[] map[] <nil> map[] 127.0.0.1:49533 /test?qs=1 <nil> <nil> <nil> 0xc420542900}
	graph.go:43: got 8 events
	graph.go:252: Total 114 nodes, 128 edges checked
=== RUN   TestTraceHTTPHelperPostB
--- PASS: TestTraceHTTPHelperPostB (0.01s)
	http_instrumentation_test.go:214: server: got request &{POST /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] Content-Length:[0] X-Trace:[2B5E70FC2A585E681A26C455B1CCAB1928C23CD4FC9BAB41A6EB076E4601] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49534 map[] map[] <nil> map[] 127.0.0.1:49535 /test?qs=1 <nil> <nil> <nil> 0xc4205431d0}
	graph.go:43: got 8 events
	graph.go:252: Total 122 nodes, 138 edges checked
=== RUN   TestTraceHTTPBadRequest
--- PASS: TestTraceHTTPBadRequest (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 124 nodes, 139 edges checked
=== RUN   TestTraceHTTPHelperBadReqA
--- PASS: TestTraceHTTPHelperBadReqA (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 126 nodes, 140 edges checked
=== RUN   TestTraceHTTPHelperBadReqB
--- PASS: TestTraceHTTPHelperBadReqB (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 128 nodes, 141 edges checked
=== RUN   TestTraceHTTPPanic
--- PASS: TestTraceHTTPPanic (0.01s)
	http_instrumentation_test.go:258: panicCatcher caught panic panicking!
	graph.go:43: got 7 events
	graph.go:252: Total 135 nodes, 149 edges checked
=== RUN   TestTraceHTTPPanicA
--- PASS: TestTraceHTTPPanicA (0.01s)
	http_instrumentation_test.go:258: panicCatcher caught panic panicking!
	graph.go:43: got 7 events
	graph.go:252: Total 142 nodes, 157 edges checked
=== RUN   TestTraceHTTPPanicB
--- PASS: TestTraceHTTPPanicB (0.01s)
	http_instrumentation_test.go:258: panicCatcher caught panic panicking!
	graph.go:43: got 7 events
	graph.go:252: Total 149 nodes, 165 edges checked
=== RUN   TestTraceHTTPError
--- PASS: TestTraceHTTPError (0.01s)
	graph.go:43: got 5 events
	graph.go:252: Total 154 nodes, 170 edges checked
=== RUN   TestTraceHTTPErrorA
--- PASS: TestTraceHTTPErrorA (0.01s)
	http_instrumentation_test.go:310: JoinResponse err: Get http://0.0.0.0:888888: dial tcp: address 888888: invalid port
	graph.go:43: got 5 events
	graph.go:252: Total 159 nodes, 175 edges checked
=== RUN   TestTraceHTTPErrorB
--- PASS: TestTraceHTTPErrorB (0.01s)
	http_instrumentation_test.go:334: JoinResponse err: Get http://0.0.0.0:888888: dial tcp: address 888888: invalid port
	graph.go:43: got 5 events
	graph.go:252: Total 164 nodes, 180 edges checked
=== RUN   TestTraceHTTPErrorBadRequest
--- PASS: TestTraceHTTPErrorBadRequest (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 166 nodes, 181 edges checked
=== RUN   TestTraceHTTPErrorABadRequest
--- PASS: TestTraceHTTPErrorABadRequest (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 168 nodes, 182 edges checked
=== RUN   TestTraceHTTPErrorBBadRequest
--- PASS: TestTraceHTTPErrorBBadRequest (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 170 nodes, 183 edges checked
=== RUN   TestDoubleWrappedHTTPRequest
--- PASS: TestDoubleWrappedHTTPRequest (0.02s)
	http_instrumentation_test.go:231: server: got request &{GET /test?qs=1 HTTP/1.1 1 1 map[User-Agent:[Go-http-client/1.1] X-Trace:[2BA8878CC31E80FF8E21CC572DA4C08C1CDD34F2996F8A65A914E3FCF601] Accept-Encoding:[gzip]] {} <nil> 0 [] false 127.0.0.1:49545 map[] map[] <nil> map[] 127.0.0.1:49546 /test?qs=1 <nil> <nil> <nil> 0xc42001f950}
	http_instrumentation_test.go:543: response: &{403 Forbidden 403 HTTP/1.1 1 1 map[Date:[Sun, 29 Jul 2018 04:44:15 GMT] Content-Length:[0] X-Trace:[2BA8878CC31E80FF8E21CC572DA4C08C1CDD34F299EE8E17BAA786C94301]] {} 0 [] false false map[] 0xc420461000 <nil>}
	graph.go:43: got 10 events
	graph.go:252: Total 180 nodes, 196 edges checked
=== RUN   TestDistributedApp
--- PASS: TestDistributedApp (0.02s)
	http_instrumentation_test.go:654: Response: &{200 OK 200 HTTP/1.1 1 1 map[Content-Type:[text/plain; charset=utf-8] X-Trace:[2B09CD868F48C5AE518CF2E618C2D487A2F859D425AAF0635738980A3F01] Date:[Sun, 29 Jul 2018 04:44:15 GMT] Content-Length:[27]] 0xc4200a1c80 27 [] false false map[] 0xc4204e2500 <nil>} BUF {"result":"hello from bob"}
	graph.go:43: got 10 events
	graph.go:252: Total 190 nodes, 209 edges checked
=== RUN   TestConcurrentApp
--- PASS: TestConcurrentApp (0.02s)
	http_instrumentation_test.go:752: Response: &{200 OK 200 HTTP/1.1 1 1 map[Content-Length:[81] Content-Type:[text/plain; charset=utf-8] X-Trace:[2B23668D63A0A9FED06E1E3BEAEDB5242B9634D26C93149C6FA483CBAD01] Date:[Sun, 29 Jul 2018 04:44:15 GMT]] 0xc420072780 81 [] false false map[] 0xc4204e2700 <nil>} BUF {"result":"hello from bob"}{"result":"hello from bob"}{"result":"hello from bob"}
	graph.go:43: got 14 events
	graph.go:252: Total 204 nodes, 228 edges checked
=== RUN   TestConcurrentAppNoTrace
2018/07/28 21:44:15 INFO passed in x-trace indicates that request is not being sampled
2018/07/28 21:44:15 INFO passed in x-trace indicates that request is not being sampled
2018/07/28 21:44:15 INFO passed in x-trace indicates that request is not being sampled
--- PASS: TestConcurrentAppNoTrace (0.01s)
=== RUN   TestBeginProfile
--- PASS: TestBeginProfile (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 206 nodes, 229 edges checked
=== RUN   TestBeginSpanProfile
--- PASS: TestBeginSpanProfile (0.00s)
	graph.go:43: got 6 events
	graph.go:252: Total 212 nodes, 236 edges checked
=== RUN   TestNoTraceBeginProfile
--- PASS: TestNoTraceBeginProfile (0.00s)
=== RUN   TestTraceErrorBeginProfile
--- PASS: TestTraceErrorBeginProfile (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 213 nodes, 236 edges checked
=== RUN   TestNoTraceBeginSpanProfile
--- PASS: TestNoTraceBeginSpanProfile (0.00s)
=== RUN   TestTraceErrorBeginSpanProfile
--- PASS: TestTraceErrorBeginSpanProfile (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 215 nodes, 237 edges checked
=== RUN   TestTraceMetadata
--- PASS: TestTraceMetadata (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 217 nodes, 238 edges checked
=== RUN   TestNoTraceMetadata
--- PASS: TestNoTraceMetadata (0.00s)
=== RUN   TestTraceMetadataDiff
--- PASS: TestTraceMetadataDiff (0.00s)
=== RUN   TestTraceExample
--- PASS: TestTraceExample (0.04s)
	trace_test.go:179: Reporting unrecognized event KV type
	graph.go:43: got 13 events
	graph.go:252: Total 230 nodes, 253 edges checked
=== RUN   TestTraceExampleCtx
--- PASS: TestTraceExampleCtx (0.04s)
	trace_test.go:189: Reporting unrecognized event KV type
	graph.go:43: got 13 events
	graph.go:252: Total 243 nodes, 268 edges checked
=== RUN   TestNoTraceExample
--- PASS: TestNoTraceExample (0.03s)
=== RUN   TestTraceFromMetadata
--- PASS: TestTraceFromMetadata (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 245 nodes, 270 edges checked
=== RUN   TestNoTraceFromMetadata
--- PASS: TestNoTraceFromMetadata (0.00s)
=== RUN   TestNoTraceFromBadMetadata
2018/07/28 21:44:15 INFO passed in x-trace seems invalid, ignoring
--- PASS: TestNoTraceFromBadMetadata (0.00s)
=== RUN   TestTraceJoin
--- PASS: TestTraceJoin (0.00s)
	graph.go:43: got 4 events
	graph.go:252: Total 249 nodes, 274 edges checked
=== RUN   TestNullTrace
--- PASS: TestNullTrace (0.00s)
PASS
coverage: 46.8% of statements in github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter, github.com/appoptics/appoptics-apm-go/v1/ao/internal/log, github.com/appoptics/appoptics-apm-go/v1/ao/internal/config, github.com/appoptics/appoptics-apm-go/v1/ao/internal/host, github.com/appoptics/appoptics-apm-go/v1/ao, github.com/appoptics/appoptics-apm-go/v1/ao/opentracing
ok  	github.com/appoptics/appoptics-apm-go/v1/ao	2.311s
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter ~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
2018/07/28 21:44:18 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:44:18 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:44:18 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:44:18 INFO AppOptics reporter is started: 0xc42002e1e0
=== RUN   TestBytesBucket
--- PASS: TestBytesBucket (4.51s)
=== RUN   TestMetadata
--- PASS: TestMetadata (0.00s)
	context_test.go:27: md1: 2B60BB90E1DFAD3759DD1445269C7A5AE5F530A0637E457F13D840C7E700
	context_test.go:71: mdS: 2A115C78560200D55DB23CFEF296392CAF2C942FD300
	context_test.go:120: mdCopy: 2B60BB90E1DFAD3759DD1445269C7A5AE5F530A0637E457F13D840C7E700
	context_test.go:123: cctx opID [126 69 127 19 216 64 199 231]
	context_test.go:124:  ctx opID [126 69 127 19 216 64 199 231]
=== RUN   TestMetadataRandom
2018/07/28 21:44:22 INFO AppOptics rand.Read error: rand error
2018/07/28 21:44:22 INFO AppOptics rand.Read error: rand error
--- PASS: TestMetadataRandom (0.00s)
=== RUN   TestReportEventMap
--- PASS: TestReportEventMap (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 2 nodes, 1 edges checked
=== RUN   TestNewContext
2018/07/28 21:44:22 INFO passed in x-trace seems invalid, ignoring
2018/07/28 21:44:22 INFO passed in x-trace seems invalid, ignoring
--- PASS: TestNewContext (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 4 nodes, 1 edges checked
=== RUN   TestNewContextTracingDisabled
--- PASS: TestNewContextTracingDisabled (0.00s)
=== RUN   TestNullContext
--- PASS: TestNullContext (0.00s)
=== RUN   TestSendEvent
--- PASS: TestSendEvent (0.00s)
	graph.go:43: got 3 events
	graph.go:252: Total 7 nodes, 3 edges checked
=== RUN   TestOboeEvent
--- PASS: TestOboeEvent (0.00s)
	event_test.go:112: TestEvent md: 2BCE39DDA4BFFACDA5324663AD364EB9D858A5450D5E49EFBAFF27E5B900
=== RUN   TestEventMetadata
--- PASS: TestEventMetadata (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 9 nodes, 4 edges checked
=== RUN   TestEvent
--- PASS: TestEvent (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 11 nodes, 5 edges checked
=== RUN   TestEventNoEdge
--- PASS: TestEventNoEdge (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 13 nodes, 5 edges checked
=== RUN   TestAppendIPAddresses
--- PASS: TestAppendIPAddresses (0.00s)
=== RUN   TestAppendMACAddresses
--- PASS: TestAppendMACAddresses (0.00s)
=== RUN   TestAddMetricsValue
--- PASS: TestAddMetricsValue (0.00s)
=== RUN   TestGetTransactionFromURL
--- PASS: TestGetTransactionFromURL (0.00s)
=== RUN   TestTransMap
--- PASS: TestTransMap (0.00s)
=== RUN   TestRecordMeasurement
--- PASS: TestRecordMeasurement (0.00s)
=== RUN   TestRecordHistogram
--- PASS: TestRecordHistogram (0.01s)
=== RUN   TestAddMeasurementToBSON
--- PASS: TestAddMeasurementToBSON (0.00s)
=== RUN   TestAddHistogramToBSON
--- PASS: TestAddHistogramToBSON (0.01s)
=== RUN   TestGenerateMetricsMessage
--- PASS: TestGenerateMetricsMessage (0.01s)
=== RUN   TestInitMessage
--- PASS: TestInitMessage (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 14 nodes, 5 edges checked
=== RUN   TestInitMessageUDP
--- SKIP: TestInitMessageUDP (0.00s)
	reporter_test.go:179: not running in UDP mode, skipping.
=== RUN   TestTokenBucket
--- PASS: TestTokenBucket (3.57s)
	oboe_test.go:82: TB iters 100 allowed 19 dropped 481 limited 231
=== RUN   TestTokenBucketTime
--- PASS: TestTokenBucketTime (0.20s)
=== RUN   TestSamplingRate
--- PASS: TestSamplingRate (0.49s)
=== RUN   TestSampleTracingDisabled
--- PASS: TestSampleTracingDisabled (0.00s)
=== RUN   TestSampleNoValidSettings
--- PASS: TestSampleNoValidSettings (0.00s)
=== RUN   TestSampleRateBoundaries
--- PASS: TestSampleRateBoundaries (0.00s)
=== RUN   TestSampleSource
--- PASS: TestSampleSource (0.00s)
=== RUN   TestSampleFlags
--- PASS: TestSampleFlags (0.00s)
=== RUN   TestSampleTokenBucket
--- PASS: TestSampleTokenBucket (1.00s)
=== RUN   TestOboeTracingMode
2018/07/28 21:44:27 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:44:27 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:44:27 WARN non-default env - APPOPTICS_TRACING_MODE: ALWAYS
2018/07/28 21:44:27 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:44:27 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:44:27 WARN non-default env - APPOPTICS_TRACING_MODE: never
2018/07/28 21:44:27 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:44:27 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:44:27 WARN invalid env, discarded - APPOPTICS_TRACING_MODE: 
--- PASS: TestOboeTracingMode (0.00s)
=== RUN   TestCacheHostname
2018/07/28 21:44:27 ERROR Unable to get hostname, AppOptics tracing disabled.
--- PASS: TestCacheHostname (0.00s)
	reporter_test.go:52: Forcing hostname error: 'Unable to get hostname' log message expected
=== RUN   TestReportEvent
--- PASS: TestReportEvent (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 15 nodes, 5 edges checked
=== RUN   TestReportMetric
--- PASS: TestReportMetric (0.00s)
=== RUN   TestTestReporter
--- PASS: TestTestReporter (0.11s)
=== RUN   TestNullReporter
--- PASS: TestNullReporter (0.00s)
=== RUN   TestUDPReporter
--- SKIP: TestUDPReporter (0.00s)
	reporter_test.go:179: not running in UDP mode, skipping.
=== RUN   TestGRPCReporter
2018/07/28 21:44:28 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:44:28 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:44:28 WARN invalid env, discarded - APPOPTICS_TRACING_MODE: 
2018/07/28 21:44:28 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:44:28 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:44:28 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:44:28 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:44:28 WARN invalid env, discarded - APPOPTICS_TRACING_MODE: 
2018/07/28 21:44:28 WARN Shutting down the gRPC reporter: 0xc42002e1e0
2018/07/28 21:44:28 WARN spanMessageAggregator goroutine exiting.
2018/07/28 21:44:28 WARN periodicTasks goroutine exiting.
2018/07/28 21:44:28 WARN eventSender goroutine exiting.
2018/07/28 21:44:28 WARN statusSender goroutine exiting.
2018/07/28 21:44:28 INFO AppOptics reporter is started: 0xc42002e720
TestGRPCServer.PostStatus req:
#0->21:44:28 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostStatus req:
#0->21:44:28 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostStatus req:
#0->21:44:28 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer2",
  "PID": 40707,
  "Timestamp_u": 1532839468300121,
  "X-Trace": "2BC7F751534E0AC18F8D147569F5C8B820D521E2F2FEF383D26D2489FA01",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:44:28 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer1",
  "PID": 40707,
  "Timestamp_u": 1532839468197191,
  "X-Trace": "2BC7F751534E0AC18F8D147569F5C8B820D521E2F23B73454CD6EED6EB01",
  "_V": "1"
}
--- PASS: TestGRPCReporter (0.38s)
=== RUN   TestInterruptedGRPCReporter
TestGRPCServer.PostStatus req:
#0->21:44:28 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostStatus req:
#0->21:44:28 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostEvents req:
#0->21:44:28 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-1",
  "PID": 40707,
  "Timestamp_u": 1532839468562224,
  "X-Trace": "2B6032DA73D78365F05EED11EC76C37F9BEE7F5FBD87AF559A5477497B01",
  "_V": "1"
}
#1->21:44:28 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-2",
  "PID": 40707,
  "Timestamp_u": 1532839468612918,
  "X-Trace": "2B127DA46E0BCBA8627F57E383D4B3549FE0C15B3AFC9D21EE5744EE5901",
  "_V": "1"
}
#2->21:44:28 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-3",
  "PID": 40707,
  "Timestamp_u": 1532839468667536,
  "X-Trace": "2B5CFEE20CD75CA57951D8138FAE1264917C88626FB99AA447CE5377A401",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:44:30 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-4",
  "PID": 40707,
  "Timestamp_u": 1532839468721846,
  "X-Trace": "2BF29CBBAE097BD3698AC02C0DCAC2F2E36E411A597705A25A1DA3118701",
  "_V": "1"
}
#1->21:44:30 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-5",
  "PID": 40707,
  "Timestamp_u": 1532839468776643,
  "X-Trace": "2BE449DB440E87F90458E0A6B14F069E4FFE6A50E4A992A95F29A58AA801",
  "_V": "1"
}
#2->21:44:30 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-6",
  "PID": 40707,
  "Timestamp_u": 1532839468827033,
  "X-Trace": "2BA9AD2F5008FA91CBBE58520503BB165F53251D577D64ACEA9FB44DEF01",
  "_V": "1"
}
#3->21:44:30 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-7",
  "PID": 40707,
  "Timestamp_u": 1532839468881739,
  "X-Trace": "2BF1AAE5BFB1EB4358E889580FF4CB3C30561A1C430897A0D73EB4E77B01",
  "_V": "1"
}
#4->21:44:30 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-8",
  "PID": 40707,
  "Timestamp_u": 1532839468932394,
  "X-Trace": "2BFE9F627242DF505D124BD917313980147BCC81EF8B00062C920C813D01",
  "_V": "1"
}
#5->21:44:30 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-9",
  "PID": 40707,
  "Timestamp_u": 1532839468983684,
  "X-Trace": "2B35CB6E6DA5BFA128238CB91D8EC00E44870226D45BA0B4B179937FB601",
  "_V": "1"
}
#6->21:44:30 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-10",
  "PID": 40707,
  "Timestamp_u": 1532839469036002,
  "X-Trace": "2B87027F686F28EA18C2308B607B2D666C52C75234BBE88ACF5222339D01",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-11",
  "PID": 40707,
  "Timestamp_u": 1532839479091622,
  "X-Trace": "2B19B08460585F5EE737E5F9FF71015AE0C4804779561BA5E0016A3B6701",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-12",
  "PID": 40707,
  "Timestamp_u": 1532839479146911,
  "X-Trace": "2B76EB02734E307F2BDE08174F31E530AB5A8238F23436C6FF5D13311201",
  "_V": "1"
}
#1->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-13",
  "PID": 40707,
  "Timestamp_u": 1532839479199098,
  "X-Trace": "2BB4C62767B741347B67BC5EF14B88F5593218E4DC2E3AC72EAD2BD4A801",
  "_V": "1"
}
#2->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-14",
  "PID": 40707,
  "Timestamp_u": 1532839479251073,
  "X-Trace": "2B091090A3F7D7F864D450CE1B0A2E49B62A4C6D80665A6F2022C7A51201",
  "_V": "1"
}
#3->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-15",
  "PID": 40707,
  "Timestamp_u": 1532839479303806,
  "X-Trace": "2BBC2B26B1E8C368B38EDEAD476DF2C796287B311EEB7982C72FFB8D0601",
  "_V": "1"
}
#4->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-16",
  "PID": 40707,
  "Timestamp_u": 1532839479355973,
  "X-Trace": "2B51C794791370622579E6640B9DF8E2973A9882B29C196B579C00795201",
  "_V": "1"
}
#5->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-17",
  "PID": 40707,
  "Timestamp_u": 1532839479408706,
  "X-Trace": "2BF30BB877226BE0AB7F35C6B16DE146D7EF997F0CEB88B2EE1828C40F01",
  "_V": "1"
}
#6->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-18",
  "PID": 40707,
  "Timestamp_u": 1532839479461010,
  "X-Trace": "2B93FF3E01E4AE54FC791779D60CB5D01DB26A4BEE75A32DE3D18E1BFB01",
  "_V": "1"
}
#7->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-19",
  "PID": 40707,
  "Timestamp_u": 1532839479512683,
  "X-Trace": "2BC6B7BC3FFDF42F6EA5DC6D4D693368658CCCACB95967607BDCB1B37601",
  "_V": "1"
}
#8->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-20",
  "PID": 40707,
  "Timestamp_u": 1532839479564966,
  "X-Trace": "2B42705CAFBEC913AA8BBC73E24FBBBF36FC8A9BA5D96963DE3664518301",
  "_V": "1"
}
#9->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-21",
  "PID": 40707,
  "Timestamp_u": 1532839549636320,
  "X-Trace": "2BCE23DD8C9DDE0EC6EE1536827F9ECF402E1040E08249B02A80D0B47801",
  "_V": "1"
}
#10->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-22",
  "PID": 40707,
  "Timestamp_u": 1532839549687013,
  "X-Trace": "2BFDEFA2A6537A8489D21CA9BFA8E900AAB6E57357DC91E4555B3D384701",
  "_V": "1"
}
#11->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-23",
  "PID": 40707,
  "Timestamp_u": 1532839549737726,
  "X-Trace": "2BF372C4DD36856501ABE49C74FA37E29654798A76D76095205D29516601",
  "_V": "1"
}
#12->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-24",
  "PID": 40707,
  "Timestamp_u": 1532839549788982,
  "X-Trace": "2BF6EE2FF744B6F085615899DEBFEED94162DCB4687385F1EE047F22CC01",
  "_V": "1"
}
#13->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-25",
  "PID": 40707,
  "Timestamp_u": 1532839549841953,
  "X-Trace": "2BF2BFBA952DB239A17E92F6B68CAF2EFEA18AFBCB55D1AFF6292927AF01",
  "_V": "1"
}
#14->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-26",
  "PID": 40707,
  "Timestamp_u": 1532839549893540,
  "X-Trace": "2B6328CA31FEB7175C872E53D601E416EF8D7F862ECB52341CE3ED2A9901",
  "_V": "1"
}
#15->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-27",
  "PID": 40707,
  "Timestamp_u": 1532839549945065,
  "X-Trace": "2BF98AC4C9AA9747B926440969BD4569A2591B639DAEFF9898ED1220BD01",
  "_V": "1"
}
#16->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-28",
  "PID": 40707,
  "Timestamp_u": 1532839549998445,
  "X-Trace": "2B635E8E739381FD57E7562A5FC92B3CA153F9F556B8675FE8C5B6F56C01",
  "_V": "1"
}
#17->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-29",
  "PID": 40707,
  "Timestamp_u": 1532839550053013,
  "X-Trace": "2B91890DC3893904664FE6E6A159562B54DCD50C4673445D1009EC271801",
  "_V": "1"
}
#18->21:46:04 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-30",
  "PID": 40707,
  "Timestamp_u": 1532839550107594,
  "X-Trace": "2B833BC8FFCA7353404BFB17C5E38B6B1771407E5EA1D899E9A9D8A40301",
  "_V": "1"
}
--- PASS: TestInterruptedGRPCReporter (111.71s)
=== RUN   TestRedirect
2018/07/28 21:46:20 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:46:20 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:46:20 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:46:20 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:46:20 WARN invalid env, discarded - APPOPTICS_TRACING_MODE: 
2018/07/28 21:46:20 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:46:20 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:46:20 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:46:20 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:46:20 WARN invalid env, discarded - APPOPTICS_TRACING_MODE: 
2018/07/28 21:46:20 INFO AppOptics reporter is started: 0xc42059f920
TestGRPCServer.PostStatus req:
#0->21:46:20 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostStatus req:
#0->21:46:20 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostEvents req:
#0->21:46:20 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-1",
  "PID": 40707,
  "Timestamp_u": 1532839580283599,
  "X-Trace": "2B57029ACCFBB20BB62F9E8B8AAB57FCC4EB9FB47016E90C1E65DECD3901",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-2",
  "PID": 40707,
  "Timestamp_u": 1532839580337102,
  "X-Trace": "2B16F72933F1819D960F1854EC5B38C72E523D5CCD025AD98E493C401D01",
  "_V": "1"
}
#1->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-3",
  "PID": 40707,
  "Timestamp_u": 1532839580389035,
  "X-Trace": "2BA1E6AB0903B4EBD12E5A391C082D1F4279FA50C9E2C9F1B793FB246101",
  "_V": "1"
}
#2->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-4",
  "PID": 40707,
  "Timestamp_u": 1532839580441352,
  "X-Trace": "2B1EFF9C7FC443AEA0C3FACDA41A0DEC45B0625852C125887489EFB94E01",
  "_V": "1"
}
#3->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-5",
  "PID": 40707,
  "Timestamp_u": 1532839580493765,
  "X-Trace": "2B5BCB8D1090723F781E92D4182660DDFBB6675ED1EA22ED1FD2305F0A01",
  "_V": "1"
}
#4->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-6",
  "PID": 40707,
  "Timestamp_u": 1532839580544128,
  "X-Trace": "2B9ACCD4CE1E0B8DC9B0933F08393CD5DACEB226553876F3FBCCA2092301",
  "_V": "1"
}
#5->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-7",
  "PID": 40707,
  "Timestamp_u": 1532839580598052,
  "X-Trace": "2BFE1D450AA1E42A9EDD5B6FA2F28476B87B994A02264CBFAA3A727F4B01",
  "_V": "1"
}
#6->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-8",
  "PID": 40707,
  "Timestamp_u": 1532839580651360,
  "X-Trace": "2BD359ABAB6B5C22168AEB9EB8E24D6DC4F45AC44A22ED1CDC52F43F5C01",
  "_V": "1"
}
#7->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-9",
  "PID": 40707,
  "Timestamp_u": 1532839580701881,
  "X-Trace": "2B8DB75FBBC58C83F41792A4E6071305AA41967C41B43EB34D9BAB325E01",
  "_V": "1"
}
#8->21:46:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-10",
  "PID": 40707,
  "Timestamp_u": 1532839580754783,
  "X-Trace": "2B7446F26D948EB3BDFE0356A0B45FD64D29DF3620F72727799048D75E01",
  "_V": "1"
}
TestGRPCServer.PostStatus req:
#0->21:46:40 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostEvents req:
#0->21:46:40 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-11",
  "PID": 40707,
  "Timestamp_u": 1532839600852612,
  "X-Trace": "2BE79DB7785D6B393E102C545BE27AB13663ED7C7E06F5DAC76EE7182101",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-12",
  "PID": 40707,
  "Timestamp_u": 1532839600906953,
  "X-Trace": "2BEA4993A6D4F972DE96CBCD0648ADD2967DD810DB6610EB74D43D406401",
  "_V": "1"
}
#1->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-13",
  "PID": 40707,
  "Timestamp_u": 1532839600961281,
  "X-Trace": "2B9BF051ADD34B9F346BAD18AEF5CB2A110C7712B97E9E1457B65A777A01",
  "_V": "1"
}
#2->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-14",
  "PID": 40707,
  "Timestamp_u": 1532839601011591,
  "X-Trace": "2B828A45C269A74F19AC5A4646CDFF06AF5FB6218E091DAA82FD615CD201",
  "_V": "1"
}
#3->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-15",
  "PID": 40707,
  "Timestamp_u": 1532839601065872,
  "X-Trace": "2B92618010D7977417EBCA7EAC7A3D9C78E4D027CAA547E4026B9E6B3D01",
  "_V": "1"
}
#4->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-16",
  "PID": 40707,
  "Timestamp_u": 1532839601119751,
  "X-Trace": "2BD03D55C3420F138636E51FB5C41ACE5CB0D0105BF9A6E0C2D9D3F31D01",
  "_V": "1"
}
#5->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-17",
  "PID": 40707,
  "Timestamp_u": 1532839601170126,
  "X-Trace": "2BD3C54A6457A2887E3566290AB1994CA94180BB3AAD626240D60A37F501",
  "_V": "1"
}
#6->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-18",
  "PID": 40707,
  "Timestamp_u": 1532839601220429,
  "X-Trace": "2B21871A6B5F7001D9854E86385CFD0645A3B8D0EE2E283D82DC89F70D01",
  "_V": "1"
}
#7->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-19",
  "PID": 40707,
  "Timestamp_u": 1532839601272835,
  "X-Trace": "2B9768260E25D25B99A4AD4EEA3750998EC6E73FA7DAA8B23A263D14F201",
  "_V": "1"
}
#8->21:46:42 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-20",
  "PID": 40707,
  "Timestamp_u": 1532839601327669,
  "X-Trace": "2B14045560A439A468971542D70124D4C3F6944A70AC54F59282C0FE0101",
  "_V": "1"
}
--- PASS: TestRedirect (31.22s)
=== RUN   TestShutdownGRPCReporter
2018/07/28 21:46:51 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:46:51 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:46:51 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:46:51 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:46:51 WARN invalid env, discarded - APPOPTICS_TRACING_MODE: 
2018/07/28 21:46:51 INFO AppOptics reporter is started: 0xc4205fe9c0
TestGRPCServer.PostStatus req:
#0->21:46:51 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostStatus req:
#0->21:46:51 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
2018/07/28 21:46:56 WARN Shutting down the gRPC reporter: 0xc4205fe9c0
2018/07/28 21:46:56 WARN spanMessageAggregator goroutine exiting.
2018/07/28 21:46:56 WARN statusSender goroutine exiting.
2018/07/28 21:46:56 WARN eventSender goroutine exiting.
--- PASS: TestShutdownGRPCReporter (10.13s)
=== RUN   TestInvalidKey
2018/07/28 21:47:01 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:47:01 WARN non-default env - APPOPTICS_SERVICE_KEY: inva********************************************************9217:Go
2018/07/28 21:47:01 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:47:01 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:47:01 WARN invalid env, discarded - APPOPTICS_TRACING_MODE: 
2018/07/28 21:47:01 INFO AppOptics reporter is started: 0xc420268360
TestGRPCServer.PostStatus req:
#0->21:47:01 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
TestGRPCServer.PostStatus req:
#0->21:47:01 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40707
}
Sent a message at:  2018-07-28 21:47:06.64276451 -0700 PDT m=+168.561880823
TestGRPCServer.PostEvents req:
#0->21:47:06 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "hello-from-invalid-key",
  "PID": 40707,
  "Timestamp_u": 1532839626642665,
  "X-Trace": "2BB9B956C319A26E299A5FCEA7EEF1669EE90E978A2D9C6361E6230B6C01",
  "_V": "1"
}
2018/07/28 21:47:06 ERROR Server responded: Invalid API key. Reporter is closing.
2018/07/28 21:47:06 WARN Shutting down the gRPC reporter: 0xc420268360
2018/07/28 21:47:06 WARN spanMessageAggregator goroutine exiting.
2018/07/28 21:47:06 WARN statusSender goroutine exiting.
2018/07/28 21:47:06 WARN eventSender goroutine exiting.
2018/07/28 21:47:07 WARN eventRetrySender goroutine exiting.
The agent is shutdown by the user.
--- PASS: TestInvalidKey (10.13s)
PASS
coverage: 75.9% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter	174.631s
2018/07/28 21:47:15 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:47:15 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:47:15 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:47:15 INFO AppOptics reporter is started: 0xc420086720
=== RUN   TestBytesBucket
2018/07/28 21:47:18 ERROR Server responded: Invalid API key. Reporter is closing.
2018/07/28 21:47:18 WARN Shutting down the gRPC reporter: 0xc420086720
2018/07/28 21:47:18 WARN spanMessageAggregator goroutine exiting.
2018/07/28 21:47:18 WARN periodicTasks goroutine exiting.
2018/07/28 21:47:18 WARN statusSender goroutine exiting.
2018/07/28 21:47:18 WARN eventSender goroutine exiting.
--- PASS: TestBytesBucket (4.51s)
=== RUN   TestMetadata
--- PASS: TestMetadata (0.00s)
	context_test.go:27: md1: 2B6488FC1D581E09C592F404EE92E001DCC6ED01070AA146E017F2FDF500
	context_test.go:71: mdS: 2A664BAD4AD1082C859DC267A82BA86F6E8AAE789A00
	context_test.go:120: mdCopy: 2B6488FC1D581E09C592F404EE92E001DCC6ED01070AA146E017F2FDF500
	context_test.go:123: cctx opID [10 161 70 224 23 242 253 245]
	context_test.go:124:  ctx opID [10 161 70 224 23 242 253 245]
=== RUN   TestMetadataRandom
2018/07/28 21:47:19 INFO AppOptics rand.Read error: rand error
2018/07/28 21:47:19 INFO AppOptics rand.Read error: rand error
--- PASS: TestMetadataRandom (0.00s)
=== RUN   TestReportEventMap
--- PASS: TestReportEventMap (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 2 nodes, 1 edges checked
=== RUN   TestNewContext
2018/07/28 21:47:19 INFO passed in x-trace seems invalid, ignoring
2018/07/28 21:47:19 INFO passed in x-trace seems invalid, ignoring
--- PASS: TestNewContext (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 4 nodes, 1 edges checked
=== RUN   TestNewContextTracingDisabled
--- PASS: TestNewContextTracingDisabled (0.00s)
=== RUN   TestNullContext
--- PASS: TestNullContext (0.00s)
=== RUN   TestSendEvent
--- PASS: TestSendEvent (0.00s)
	graph.go:43: got 3 events
	graph.go:252: Total 7 nodes, 3 edges checked
=== RUN   TestOboeEvent
--- PASS: TestOboeEvent (0.00s)
	event_test.go:112: TestEvent md: 2B6DF42C1202C23728DE80F8C43920951634CE50FDBD197D741B4DC94200
=== RUN   TestEventMetadata
--- PASS: TestEventMetadata (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 9 nodes, 4 edges checked
=== RUN   TestEvent
--- PASS: TestEvent (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 11 nodes, 5 edges checked
=== RUN   TestEventNoEdge
--- PASS: TestEventNoEdge (0.00s)
	graph.go:43: got 2 events
	graph.go:252: Total 13 nodes, 5 edges checked
=== RUN   TestAppendIPAddresses
--- PASS: TestAppendIPAddresses (0.00s)
=== RUN   TestAppendMACAddresses
--- PASS: TestAppendMACAddresses (0.00s)
=== RUN   TestAddMetricsValue
--- PASS: TestAddMetricsValue (0.00s)
=== RUN   TestGetTransactionFromURL
--- PASS: TestGetTransactionFromURL (0.00s)
=== RUN   TestTransMap
--- PASS: TestTransMap (0.00s)
=== RUN   TestRecordMeasurement
--- PASS: TestRecordMeasurement (0.00s)
=== RUN   TestRecordHistogram
--- PASS: TestRecordHistogram (0.01s)
=== RUN   TestAddMeasurementToBSON
--- PASS: TestAddMeasurementToBSON (0.00s)
=== RUN   TestAddHistogramToBSON
--- PASS: TestAddHistogramToBSON (0.01s)
=== RUN   TestGenerateMetricsMessage
--- PASS: TestGenerateMetricsMessage (0.00s)
=== RUN   TestNoboe
--- PASS: TestNoboe (0.00s)
=== RUN   TestCacheHostname
2018/07/28 21:47:19 ERROR Unable to get hostname, AppOptics tracing disabled.
--- PASS: TestCacheHostname (0.00s)
	reporter_test.go:52: Forcing hostname error: 'Unable to get hostname' log message expected
=== RUN   TestReportEvent
--- PASS: TestReportEvent (0.00s)
	graph.go:43: got 1 events
	graph.go:252: Total 14 nodes, 5 edges checked
=== RUN   TestReportMetric
--- PASS: TestReportMetric (0.00s)
=== RUN   TestTestReporter
--- PASS: TestTestReporter (0.10s)
=== RUN   TestNullReporter
--- PASS: TestNullReporter (0.00s)
=== RUN   TestUDPReporter
--- SKIP: TestUDPReporter (0.00s)
	reporter_test.go:179: not running in UDP mode, skipping.
=== RUN   TestGRPCReporter
2018/07/28 21:47:20 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:47:20 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:47:20 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:47:20 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:47:20 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:47:20 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:47:20 INFO AppOptics reporter is started: 0xc420087b60
TestGRPCServer.PostStatus req:
#0->21:47:20 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostStatus req:
#0->21:47:20 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostStatus req:
#0->21:47:20 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer2",
  "PID": 40737,
  "Timestamp_u": 1532839640305698,
  "X-Trace": "2B56B755A2CD37BAE08C62701D814BB49EFF3E8CF5981E8EB4249235B801",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:47:20 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer1",
  "PID": 40737,
  "Timestamp_u": 1532839640204663,
  "X-Trace": "2B56B755A2CD37BAE08C62701D814BB49EFF3E8CF583453F58A22672B501",
  "_V": "1"
}
--- PASS: TestGRPCReporter (0.38s)
=== RUN   TestInterruptedGRPCReporter
TestGRPCServer.PostStatus req:
#0->21:47:20 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostStatus req:
#0->21:47:20 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostEvents req:
#0->21:47:20 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-1",
  "PID": 40737,
  "Timestamp_u": 1532839640571243,
  "X-Trace": "2B2361FC2D1ADFD3D59A0F3536939E850EFF1649D053DCB1EC811BB21001",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-2",
  "PID": 40737,
  "Timestamp_u": 1532839640624921,
  "X-Trace": "2B99139B400E6D0ECCACCA4F6B0D9C54D3CFA9504B5DEC9FBF6F1086E801",
  "_V": "1"
}
#1->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-3",
  "PID": 40737,
  "Timestamp_u": 1532839640676448,
  "X-Trace": "2BDFC1B830DED1836695B2886D06555AFA21E44BB48C5C832DD6D78FAD01",
  "_V": "1"
}
#2->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-4",
  "PID": 40737,
  "Timestamp_u": 1532839640726860,
  "X-Trace": "2B2232E3B3F51EC202F18A8D5E62F8BA50CD17500C392830C06217519701",
  "_V": "1"
}
#3->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-5",
  "PID": 40737,
  "Timestamp_u": 1532839640777805,
  "X-Trace": "2B70164D47EFC3F06E7929B0643AFF293B670E00A1B969B61D4DBB283A01",
  "_V": "1"
}
#4->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-6",
  "PID": 40737,
  "Timestamp_u": 1532839640829403,
  "X-Trace": "2B4E2F4ECEE766A1A9FDDAEFDD961D69849C3131C8E8417762EF96901901",
  "_V": "1"
}
#5->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-7",
  "PID": 40737,
  "Timestamp_u": 1532839640883026,
  "X-Trace": "2BC215C30BA62D514A0253DC42870A29FC37ACD89C5C5D4769A0C79F9701",
  "_V": "1"
}
#6->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-8",
  "PID": 40737,
  "Timestamp_u": 1532839640938193,
  "X-Trace": "2BB718F553B1499D42CFA5ABC48A89166392E776F6BECE124174D1BEA201",
  "_V": "1"
}
#7->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-9",
  "PID": 40737,
  "Timestamp_u": 1532839640992171,
  "X-Trace": "2BCCC5B1FE46D7D2506EB54CF91F353B7CFA71128FB0A44E2E05FEA2CE01",
  "_V": "1"
}
#8->21:47:22 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-10",
  "PID": 40737,
  "Timestamp_u": 1532839641045337,
  "X-Trace": "2BF05C52B5D3E58D8299E50D9B9ABCA1159BE5CD2A99E7B3DB2052F3B801",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:48:56 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-11",
  "PID": 40737,
  "Timestamp_u": 1532839651104371,
  "X-Trace": "2BA196D15C65306EF232A7260A0802B302EC920F508CBBC207BA1755D501",
  "_V": "1"
}
#1->21:48:56 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-12",
  "PID": 40737,
  "Timestamp_u": 1532839651158989,
  "X-Trace": "2B0DF90502E00FF5697E9C2CACFDDF6D2E6CDF73AA1971341E58EE9F1F01",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-13",
  "PID": 40737,
  "Timestamp_u": 1532839651211753,
  "X-Trace": "2B9716F570460B3C2D412612897527DACF8A2B60C6A3273266DCA331F401",
  "_V": "1"
}
#1->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-14",
  "PID": 40737,
  "Timestamp_u": 1532839651264234,
  "X-Trace": "2B1669935569D46EEDCA9E607DFE8BB068442113366F4C1682C1988B2E01",
  "_V": "1"
}
#2->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-15",
  "PID": 40737,
  "Timestamp_u": 1532839651316075,
  "X-Trace": "2B5D88022B419F6053E68D9582FA2B51F72DC33406C0CAAD3E9000E24401",
  "_V": "1"
}
#3->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-16",
  "PID": 40737,
  "Timestamp_u": 1532839651371651,
  "X-Trace": "2BC90BDA5998B09C578AE15B5310D25F942615B2A4C1A82BA3E8EA286501",
  "_V": "1"
}
#4->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-17",
  "PID": 40737,
  "Timestamp_u": 1532839651426561,
  "X-Trace": "2B7353012046921A5D21C6347B4840BC736E6303847A13780D1F205F4101",
  "_V": "1"
}
#5->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-18",
  "PID": 40737,
  "Timestamp_u": 1532839651478669,
  "X-Trace": "2BE452F3701F61F3DFAE38F50EC2E1D5A0B37D36092BC8672233108F7601",
  "_V": "1"
}
#6->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-19",
  "PID": 40737,
  "Timestamp_u": 1532839651534098,
  "X-Trace": "2B47B7091E40A8BEC45786D9C36AC2F1D79BDAF71B80CBBF7FF3D6860E01",
  "_V": "1"
}
#7->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-20",
  "PID": 40737,
  "Timestamp_u": 1532839651588327,
  "X-Trace": "2B41FE9E1CD95ABA9F87E902275FF148B2F9C6907FBA685D2551D1883501",
  "_V": "1"
}
#8->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-21",
  "PID": 40737,
  "Timestamp_u": 1532839721659041,
  "X-Trace": "2B36C15D4F33106F0F59789726FA981016E09DEAFD62F1A2376126E39D01",
  "_V": "1"
}
#9->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-22",
  "PID": 40737,
  "Timestamp_u": 1532839721712151,
  "X-Trace": "2B54E172171C95E0916DC9CE1F6DDD898E952D515B75606B75840337CE01",
  "_V": "1"
}
#10->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-23",
  "PID": 40737,
  "Timestamp_u": 1532839721764757,
  "X-Trace": "2B0062DBCA228227E3A33B29BB80B022C22FA41C021CD0BD256D329E0E01",
  "_V": "1"
}
#11->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-24",
  "PID": 40737,
  "Timestamp_u": 1532839721816498,
  "X-Trace": "2B9C8C21C898806DA01350DDA4624594B61B3B52968DB994A8840E6B3601",
  "_V": "1"
}
#12->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-25",
  "PID": 40737,
  "Timestamp_u": 1532839721871424,
  "X-Trace": "2B49BB421F39C98FF562F72A29F54F0B1D84E9F41DA2C43363D20B005D01",
  "_V": "1"
}
#13->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-26",
  "PID": 40737,
  "Timestamp_u": 1532839721925784,
  "X-Trace": "2BE467481F38522F2A93840172061A1F7E42CA504EC08B706B9B2C649D01",
  "_V": "1"
}
#14->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-27",
  "PID": 40737,
  "Timestamp_u": 1532839721976876,
  "X-Trace": "2BE741A33D07E100779429EF2AAA0B18492C66F23DB4A3025C642BF4C801",
  "_V": "1"
}
#15->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-28",
  "PID": 40737,
  "Timestamp_u": 1532839722028891,
  "X-Trace": "2B9BD005AE23FE6C010A3AC61B966BC9589B6DDFA9C074FE623DFA348201",
  "_V": "1"
}
#16->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-29",
  "PID": 40737,
  "Timestamp_u": 1532839722080378,
  "X-Trace": "2B2D7FF5C716935148DD19A276CE8071A3E8797E60B25952B6777A345B01",
  "_V": "1"
}
#17->21:48:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-30",
  "PID": 40737,
  "Timestamp_u": 1532839722135602,
  "X-Trace": "2BA827B2CDAE68DE2D04D6C9ADB12B612A339D6C68D655A48234261B7101",
  "_V": "1"
}
--- PASS: TestInterruptedGRPCReporter (111.73s)
=== RUN   TestRedirect
2018/07/28 21:49:12 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:49:12 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:49:12 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:49:12 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:49:12 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:49:12 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:49:12 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:49:12 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:49:12 INFO AppOptics reporter is started: 0xc420087aa0
TestGRPCServer.PostStatus req:
#0->21:49:12 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostStatus req:
#0->21:49:12 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostEvents req:
#0->21:49:12 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-1",
  "PID": 40737,
  "Timestamp_u": 1532839752314097,
  "X-Trace": "2B2288850F9F605832F9B2131EBD1565177FD083F8B233B2B8603613DA01",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-2",
  "PID": 40737,
  "Timestamp_u": 1532839752368415,
  "X-Trace": "2BB487CED3AC9019BBACD86FB7D8F413F8E93A8C13E121C02D9E56CAFE01",
  "_V": "1"
}
#1->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-3",
  "PID": 40737,
  "Timestamp_u": 1532839752420206,
  "X-Trace": "2B42173A519E85EAAF07BC80259B85DEC3D87BCB4F7F0B53AE2B106E5D01",
  "_V": "1"
}
#2->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-4",
  "PID": 40737,
  "Timestamp_u": 1532839752474405,
  "X-Trace": "2B0DE96F57478BEE45B36C2239530B3A497245E000CF5687B7B6C4786601",
  "_V": "1"
}
#3->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-5",
  "PID": 40737,
  "Timestamp_u": 1532839752529279,
  "X-Trace": "2BAB66B911C183E4A87EDBBC8CEDBE88E6542626C12C18B3FE8E9A512901",
  "_V": "1"
}
#4->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-6",
  "PID": 40737,
  "Timestamp_u": 1532839752579675,
  "X-Trace": "2B1B013911ACB4F070B355CE708F992B198FD1BCEE3CAB27541EEED84801",
  "_V": "1"
}
#5->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-7",
  "PID": 40737,
  "Timestamp_u": 1532839752633793,
  "X-Trace": "2BA15396C8FE7B6DA61AE27EC162DC6310EAD269120476284B0316259901",
  "_V": "1"
}
#6->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-8",
  "PID": 40737,
  "Timestamp_u": 1532839752685365,
  "X-Trace": "2BAD6101406857D112F975B0159B92F15402217882214FC4AED2EC6C2D01",
  "_V": "1"
}
#7->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-9",
  "PID": 40737,
  "Timestamp_u": 1532839752737541,
  "X-Trace": "2BF2FB836E3C18C3CBCA34B4BF96F693FEC183D86C482891DAFD94E41101",
  "_V": "1"
}
#8->21:49:14 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-10",
  "PID": 40737,
  "Timestamp_u": 1532839752789341,
  "X-Trace": "2BFE4860C078E66EE923CE857C8EAD85A843E3239ED7D509499902CCE301",
  "_V": "1"
}
TestGRPCServer.PostStatus req:
#0->21:49:32 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostEvents req:
#0->21:49:32 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-11",
  "PID": 40737,
  "Timestamp_u": 1532839772880015,
  "X-Trace": "2B3F1E20DC976C907E1C4CA421FC7137A2DF576876286C88CEBD8A97AE01",
  "_V": "1"
}
#1->21:49:32 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-12",
  "PID": 40737,
  "Timestamp_u": 1532839772933476,
  "X-Trace": "2B44D42A5305E3D5292D9ABD4580331794DC2A52F02E0E33826B9402F201",
  "_V": "1"
}
TestGRPCServer.PostEvents req:
#0->21:49:34 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-13",
  "PID": 40737,
  "Timestamp_u": 1532839772988593,
  "X-Trace": "2B1623CA5388767D5B866CB820CD9516CCD97A7486F42D1D18345D355C01",
  "_V": "1"
}
#1->21:49:34 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-14",
  "PID": 40737,
  "Timestamp_u": 1532839773041605,
  "X-Trace": "2B3B37B02BE1878133092F332AC328A25D8A2760A5A714124AD7F0480201",
  "_V": "1"
}
#2->21:49:34 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-15",
  "PID": 40737,
  "Timestamp_u": 1532839773093684,
  "X-Trace": "2BC4F6DE39449F49356DBD3A1FFCD36575687469BACD6BCFAACDB3A04001",
  "_V": "1"
}
#3->21:49:34 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-16",
  "PID": 40737,
  "Timestamp_u": 1532839773145708,
  "X-Trace": "2B7A7D6709E973FF292B0E72C7EDBAADDE80AEDE039415C6DEE318381301",
  "_V": "1"
}
#4->21:49:34 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-17",
  "PID": 40737,
  "Timestamp_u": 1532839773200219,
  "X-Trace": "2B1B19E964B83F31A75301D5F3A24C47B912F68B4F209788CD7E6FF18301",
  "_V": "1"
}
#5->21:49:34 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-18",
  "PID": 40737,
  "Timestamp_u": 1532839773254436,
  "X-Trace": "2B706E0332581A310436338D8963135EF71918524185C73C0B45B0775801",
  "_V": "1"
}
#6->21:49:34 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-19",
  "PID": 40737,
  "Timestamp_u": 1532839773308104,
  "X-Trace": "2BAD8172549FB622FB6209BFBACF893717344F5050EF9B8EDE729AA70E01",
  "_V": "1"
}
#7->21:49:34 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "layer-20",
  "PID": 40737,
  "Timestamp_u": 1532839773359927,
  "X-Trace": "2B6CE5230548C8B0ADA31F518F23AFBD4A71B78A774DA4823A2152060C01",
  "_V": "1"
}
--- PASS: TestRedirect (31.22s)
=== RUN   TestShutdownGRPCReporter
2018/07/28 21:49:43 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:49:43 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:go
2018/07/28 21:49:43 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:49:43 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:49:43 INFO AppOptics reporter is started: 0xc420172a20
TestGRPCServer.PostStatus req:
#0->21:49:43 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostStatus req:
#0->21:49:43 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
2018/07/28 21:49:48 WARN Shutting down the gRPC reporter: 0xc420172a20
2018/07/28 21:49:48 WARN statusSender goroutine exiting.
2018/07/28 21:49:48 WARN spanMessageAggregator goroutine exiting.
2018/07/28 21:49:48 WARN eventSender goroutine exiting.
--- PASS: TestShutdownGRPCReporter (10.12s)
=== RUN   TestInvalidKey
2018/07/28 21:49:53 WARN non-default env - APPOPTICS_COLLECTOR: localhost:4567
2018/07/28 21:49:53 WARN non-default env - APPOPTICS_SERVICE_KEY: inva********************************************************9217:Go
2018/07/28 21:49:53 WARN non-default env - APPOPTICS_TRUSTEDPATH: /Users/yang/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter/localhost.crt
2018/07/28 21:49:53 WARN invalid env, discarded - APPOPTICS_REPORTER: none
2018/07/28 21:49:53 INFO AppOptics reporter is started: 0xc420281320
TestGRPCServer.PostStatus req:
#0->21:49:53 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
TestGRPCServer.PostStatus req:
#0->21:49:53 {
  "ConnectionInit": true,
  "Distro": "Unknown-not-Linux",
  "Hostname": "eyang-4.local",
  "IPAddresses": [
    "192.168.1.71",
    "fe80::5046:72ff:fe4a:deb9",
    "fe80::c4:34c0:539a:877d",
    "169.254.128.78"
  ],
  "MACAddresses": [
    "60:f8:1d:cc:b6:f6",
    "52:46:72:4a:de:b9",
    "c6:61:8b:53:d6:b5"
  ],
  "PID": 40737
}
Sent a message at:  2018-07-28 21:49:58.658376607 -0700 PDT m=+163.265144903
TestGRPCServer.PostEvents req:
#0->21:49:58 {
  "Hostname": "eyang-4.local",
  "Label": "info",
  "Layer": "hello-from-invalid-key",
  "PID": 40737,
  "Timestamp_u": 1532839798658266,
  "X-Trace": "2BBA96D96F056AFF934997893EBED0D81AC0A27061C8D0F93111BD60BF01",
  "_V": "1"
}
2018/07/28 21:49:58 ERROR Server responded: Invalid API key. Reporter is closing.
2018/07/28 21:49:58 WARN Shutting down the gRPC reporter: 0xc420281320
2018/07/28 21:49:58 WARN statusSender goroutine exiting.
2018/07/28 21:49:58 WARN spanMessageAggregator goroutine exiting.
2018/07/28 21:49:58 WARN eventSender goroutine exiting.
2018/07/28 21:49:59 WARN eventRetrySender goroutine exiting.
The agent is shutdown by the user.
--- PASS: TestInvalidKey (10.12s)
PASS
coverage: 73.6% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/internal/reporter	169.334s
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/log ~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
=== RUN   TestDebugLevel
--- PASS: TestDebugLevel (0.00s)
=== RUN   TestLog
--- PASS: TestLog (0.00s)
=== RUN   TestStrToLevel
--- PASS: TestStrToLevel (0.00s)
=== RUN   TestVerifyLogLevel
--- PASS: TestVerifyLogLevel (0.00s)
=== RUN   TestSetLevel
2018/07/28 21:50:06 DEBUG logging_test.go#163 TestSetLevel(): test
2018/07/28 21:50:06 ERROR onetwothree
--- PASS: TestSetLevel (0.01s)
PASS
coverage: 95.1% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/internal/log	1.053s
=== RUN   TestDebugLevel
--- PASS: TestDebugLevel (0.00s)
=== RUN   TestLog
--- PASS: TestLog (0.00s)
=== RUN   TestStrToLevel
--- PASS: TestStrToLevel (0.00s)
=== RUN   TestVerifyLogLevel
--- PASS: TestVerifyLogLevel (0.00s)
=== RUN   TestSetLevel
2018/07/28 21:50:08 DEBUG logging_test.go#163 TestSetLevel(): test
2018/07/28 21:50:08 ERROR onetwothree
--- PASS: TestSetLevel (0.01s)
PASS
coverage: 95.1% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/internal/log	1.048s
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/config ~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
2018/07/28 21:50:10 WARN missing env - APPOPTICS_SERVICE_KEY
=== RUN   TestLoadConfig
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_COLLECTOR: example.com:12345
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_HISTOGRAM_PRECISION: 2
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_COLLECTOR: test.abc:8080
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_HISTOGRAM_PRECISION: 2
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_COLLECTOR: test.abc:8080
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_HISTOGRAM_PRECISION: 2
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_COLLECTOR: test.abc:8080
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_TRUSTEDPATH: test.crt
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_COLLECTOR_UDP: hello.udp
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_HOSTNAME_ALIAS: test
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_INSECURE_SKIP_VERIFY: false
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_HISTOGRAM_PRECISION: 2
--- PASS: TestLoadConfig (0.00s)
=== RUN   TestLoadString
2018/07/28 21:50:10 WARN non-default env - TEST_STRING: hello
2018/07/28 21:50:10 WARN non-default env - TEST_STRING: 
2018/07/28 21:50:10 WARN invalid env, discarded - TEST_STRING: 
--- PASS: TestLoadString (0.00s)
=== RUN   TestLoadBool
2018/07/28 21:50:10 WARN non-default env - TEST_BOOL: false
2018/07/28 21:50:10 WARN invalid env, discarded - TEST_BOOL: 
2018/07/28 21:50:10 WARN invalid env, discarded - TEST_BOOL: 
--- PASS: TestLoadBool (0.00s)
=== RUN   TestLoadInt
2018/07/28 21:50:10 WARN non-default env - TEST_INT: 2
--- PASS: TestLoadInt (0.00s)
=== RUN   TestLoadEnvs
--- PASS: TestLoadEnvs (0.00s)
=== RUN   TestIsValidServiceKey
--- PASS: TestIsValidServiceKey (0.00s)
=== RUN   TestMaskServiceKey
--- PASS: TestMaskServiceKey (0.00s)
=== RUN   TestIsValidTracingMode
--- PASS: TestIsValidTracingMode (0.00s)
=== RUN   TestIsValidReporterType
--- PASS: TestIsValidReporterType (0.00s)
=== RUN   TestConverters
--- PASS: TestConverters (0.00s)
=== RUN   TestWrappers
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_TRUSTEDPATH: test.crt
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_COLLECTOR_UDP: hello.udp
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_HOSTNAME_ALIAS: test
2018/07/28 21:50:10 WARN non-default env - APPOPTICS_INSECURE_SKIP_VERIFY: false
--- PASS: TestWrappers (0.00s)
PASS
coverage: 90.1% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/internal/config	1.056s
2018/07/28 21:50:12 WARN missing env - APPOPTICS_SERVICE_KEY
=== RUN   TestLoadConfig
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_COLLECTOR: example.com:12345
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_HISTOGRAM_PRECISION: 2
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_COLLECTOR: test.abc:8080
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_HISTOGRAM_PRECISION: 2
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_COLLECTOR: test.abc:8080
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_HISTOGRAM_PRECISION: 2
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_COLLECTOR: test.abc:8080
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_TRUSTEDPATH: test.crt
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_COLLECTOR_UDP: hello.udp
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_HOSTNAME_ALIAS: test
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_INSECURE_SKIP_VERIFY: false
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_HISTOGRAM_PRECISION: 2
--- PASS: TestLoadConfig (0.00s)
=== RUN   TestLoadString
2018/07/28 21:50:12 WARN non-default env - TEST_STRING: hello
2018/07/28 21:50:12 WARN non-default env - TEST_STRING: 
2018/07/28 21:50:12 WARN invalid env, discarded - TEST_STRING: 
--- PASS: TestLoadString (0.00s)
=== RUN   TestLoadBool
2018/07/28 21:50:12 WARN non-default env - TEST_BOOL: false
2018/07/28 21:50:12 WARN invalid env, discarded - TEST_BOOL: 
2018/07/28 21:50:12 WARN invalid env, discarded - TEST_BOOL: 
--- PASS: TestLoadBool (0.00s)
=== RUN   TestLoadInt
2018/07/28 21:50:12 WARN non-default env - TEST_INT: 2
--- PASS: TestLoadInt (0.00s)
=== RUN   TestLoadEnvs
--- PASS: TestLoadEnvs (0.00s)
=== RUN   TestIsValidServiceKey
--- PASS: TestIsValidServiceKey (0.00s)
=== RUN   TestMaskServiceKey
--- PASS: TestMaskServiceKey (0.00s)
=== RUN   TestIsValidTracingMode
--- PASS: TestIsValidTracingMode (0.00s)
=== RUN   TestIsValidReporterType
--- PASS: TestIsValidReporterType (0.00s)
=== RUN   TestConverters
--- PASS: TestConverters (0.00s)
=== RUN   TestWrappers
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_SERVICE_KEY: ae38********************************************************9217:Go
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_TRUSTEDPATH: test.crt
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_COLLECTOR_UDP: hello.udp
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_PREPEND_DOMAIN: true
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_HOSTNAME_ALIAS: test
2018/07/28 21:50:12 WARN non-default env - APPOPTICS_INSECURE_SKIP_VERIFY: false
--- PASS: TestWrappers (0.00s)
PASS
coverage: 90.1% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/internal/config	1.049s
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/internal/host ~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
2018/07/28 21:50:14 WARN missing env - APPOPTICS_SERVICE_KEY
=== RUN   TestFilteredIfaces
--- PASS: TestFilteredIfaces (0.00s)
=== RUN   TestIPAddresses
--- PASS: TestIPAddresses (0.00s)
=== RUN   TestHostname
--- PASS: TestHostname (0.00s)
=== RUN   TestConfiguredHostname
--- PASS: TestConfiguredHostname (0.00s)
=== RUN   TestPID
--- PASS: TestPID (0.00s)
=== RUN   TestStopHostIDObserver
2018/07/28 21:50:14 WARN Host hostId observer is stopped by user.
--- PASS: TestStopHostIDObserver (0.00s)
=== RUN   TestCurrentID
--- PASS: TestCurrentID (0.00s)
=== RUN   TestLockedHostID
--- PASS: TestLockedHostID (0.00s)
=== RUN   TestInitContainerID
--- PASS: TestInitContainerID (0.00s)
=== RUN   TestGetAWSMetadata
--- PASS: TestGetAWSMetadata (0.07s)
=== RUN   TestGetContainerID
--- PASS: TestGetContainerID (0.00s)
=== RUN   TestGetPid
--- PASS: TestGetPid (0.00s)
=== RUN   TestGetHostname
--- PASS: TestGetHostname (0.00s)
=== RUN   TestUpdateHostId
--- PASS: TestUpdateHostId (0.00s)
=== RUN   TestFuncName
--- PASS: TestFuncName (0.00s)
=== RUN   TestGetOrFallback
--- PASS: TestGetOrFallback (0.00s)
=== RUN   TestTimedUpdateHostID
--- PASS: TestTimedUpdateHostID (0.00s)
PASS
coverage: 86.1% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/internal/host	1.122s
2018/07/28 21:50:16 WARN missing env - APPOPTICS_SERVICE_KEY
=== RUN   TestFilteredIfaces
--- PASS: TestFilteredIfaces (0.00s)
=== RUN   TestIPAddresses
--- PASS: TestIPAddresses (0.00s)
=== RUN   TestHostname
--- PASS: TestHostname (0.00s)
=== RUN   TestConfiguredHostname
--- PASS: TestConfiguredHostname (0.00s)
=== RUN   TestPID
--- PASS: TestPID (0.00s)
=== RUN   TestStopHostIDObserver
2018/07/28 21:50:16 WARN Host hostId observer is stopped by user.
--- PASS: TestStopHostIDObserver (0.00s)
=== RUN   TestCurrentID
--- PASS: TestCurrentID (0.00s)
=== RUN   TestLockedHostID
--- PASS: TestLockedHostID (0.00s)
=== RUN   TestInitContainerID
--- PASS: TestInitContainerID (0.00s)
=== RUN   TestGetAWSMetadata
--- PASS: TestGetAWSMetadata (0.06s)
=== RUN   TestGetContainerID
--- PASS: TestGetContainerID (0.00s)
=== RUN   TestGetPid
--- PASS: TestGetPid (0.00s)
=== RUN   TestGetHostname
--- PASS: TestGetHostname (0.00s)
=== RUN   TestUpdateHostId
--- PASS: TestUpdateHostId (0.01s)
=== RUN   TestFuncName
--- PASS: TestFuncName (0.00s)
=== RUN   TestGetOrFallback
--- PASS: TestGetOrFallback (0.00s)
=== RUN   TestTimedUpdateHostID
--- PASS: TestTimedUpdateHostID (0.00s)
PASS
coverage: 86.1% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/internal/host	1.131s
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao/opentracing ~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
2018/07/28 21:50:19 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:50:19 ERROR Invalid service key (token:serviceName): <>. Reporter disabled.
2018/07/28 21:50:19 ERROR Check AppOptics dashboard for your token and use a service name shorter than 256 characters.
=== RUN   TestAPICheck
=== RUN   TestAPICheck/TestBinaryPropagation
=== RUN   TestAPICheck/TestContextBaggage
=== RUN   TestAPICheck/TestHTTPPropagation
=== RUN   TestAPICheck/TestInvalidExtract
=== RUN   TestAPICheck/TestInvalidInject
=== RUN   TestAPICheck/TestMandatoryFormats
=== RUN   TestAPICheck/TestMultiBaggage
=== RUN   TestAPICheck/TestSetOperationName
=== RUN   TestAPICheck/TestSpanBaggage
=== RUN   TestAPICheck/TestSpanLogs
=== RUN   TestAPICheck/TestSpanTagValueTypes
=== RUN   TestAPICheck/TestSpanTagsWithChaining
=== RUN   TestAPICheck/TestStartSpan
=== RUN   TestAPICheck/TestStartSpanWithParent
=== RUN   TestAPICheck/TestTextPropagation
=== RUN   TestAPICheck/TestUnknownFormat
--- PASS: TestAPICheck (0.03s)
    --- PASS: TestAPICheck/TestBinaryPropagation (0.00s)
    	api_checkers.go:341: harness.Probe not specified, skipping
    --- PASS: TestAPICheck/TestContextBaggage (0.00s)
    --- PASS: TestAPICheck/TestHTTPPropagation (0.00s)
    	api_checkers.go:317: harness.Probe not specified, skipping
    --- PASS: TestAPICheck/TestInvalidExtract (0.00s)
    --- PASS: TestAPICheck/TestInvalidInject (0.00s)
    --- PASS: TestAPICheck/TestMandatoryFormats (0.00s)
    --- PASS: TestAPICheck/TestMultiBaggage (0.00s)
    --- PASS: TestAPICheck/TestSetOperationName (0.00s)
    --- PASS: TestAPICheck/TestSpanBaggage (0.00s)
    --- PASS: TestAPICheck/TestSpanLogs (0.00s)
    --- PASS: TestAPICheck/TestSpanTagValueTypes (0.00s)
    --- PASS: TestAPICheck/TestSpanTagsWithChaining (0.00s)
    --- PASS: TestAPICheck/TestStartSpan (0.00s)
    --- PASS: TestAPICheck/TestStartSpanWithParent (0.00s)
    	api_checkers.go:160: harness.Probe not specified, skipping
    	api_checkers.go:160: harness.Probe not specified, skipping
    --- PASS: TestAPICheck/TestTextPropagation (0.00s)
    	api_checkers.go:293: harness.Probe not specified, skipping
    --- PASS: TestAPICheck/TestUnknownFormat (0.00s)
=== RUN   TestTracer
--- PASS: TestTracer (0.01s)
	graph.go:43: got 4 events
	graph.go:252: Total 4 nodes, 3 edges checked
=== RUN   TestBinaryExtract
--- PASS: TestBinaryExtract (0.00s)
=== RUN   TestBinaryInject
--- PASS: TestBinaryInject (0.00s)
=== RUN   TestTextMapExtract
--- PASS: TestTextMapExtract (0.00s)
=== RUN   TestSpanBaggageUnsampled
--- PASS: TestSpanBaggageUnsampled (0.00s)
PASS
coverage: 100.0% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/opentracing	1.099s
2018/07/28 21:50:21 WARN missing env - APPOPTICS_SERVICE_KEY
2018/07/28 21:50:21 ERROR Invalid service key (token:serviceName): <>. Reporter disabled.
2018/07/28 21:50:21 ERROR Check AppOptics dashboard for your token and use a service name shorter than 256 characters.
=== RUN   TestAPICheck
=== RUN   TestAPICheck/TestBinaryPropagation
=== RUN   TestAPICheck/TestContextBaggage
=== RUN   TestAPICheck/TestHTTPPropagation
=== RUN   TestAPICheck/TestInvalidExtract
=== RUN   TestAPICheck/TestInvalidInject
=== RUN   TestAPICheck/TestMandatoryFormats
=== RUN   TestAPICheck/TestMultiBaggage
=== RUN   TestAPICheck/TestSetOperationName
=== RUN   TestAPICheck/TestSpanBaggage
=== RUN   TestAPICheck/TestSpanLogs
=== RUN   TestAPICheck/TestSpanTagValueTypes
=== RUN   TestAPICheck/TestSpanTagsWithChaining
=== RUN   TestAPICheck/TestStartSpan
=== RUN   TestAPICheck/TestStartSpanWithParent
=== RUN   TestAPICheck/TestTextPropagation
=== RUN   TestAPICheck/TestUnknownFormat
--- PASS: TestAPICheck (0.06s)
    --- PASS: TestAPICheck/TestBinaryPropagation (0.00s)
    	api_checkers.go:341: harness.Probe not specified, skipping
    --- PASS: TestAPICheck/TestContextBaggage (0.00s)
    --- PASS: TestAPICheck/TestHTTPPropagation (0.00s)
    	api_checkers.go:317: harness.Probe not specified, skipping
    --- PASS: TestAPICheck/TestInvalidExtract (0.00s)
    --- PASS: TestAPICheck/TestInvalidInject (0.00s)
    --- PASS: TestAPICheck/TestMandatoryFormats (0.00s)
    --- PASS: TestAPICheck/TestMultiBaggage (0.00s)
    --- PASS: TestAPICheck/TestSetOperationName (0.00s)
    --- PASS: TestAPICheck/TestSpanBaggage (0.00s)
    --- PASS: TestAPICheck/TestSpanLogs (0.00s)
    --- PASS: TestAPICheck/TestSpanTagValueTypes (0.00s)
    --- PASS: TestAPICheck/TestSpanTagsWithChaining (0.00s)
    --- PASS: TestAPICheck/TestStartSpan (0.00s)
    --- PASS: TestAPICheck/TestStartSpanWithParent (0.00s)
    	api_checkers.go:160: harness.Probe not specified, skipping
    	api_checkers.go:160: harness.Probe not specified, skipping
    --- PASS: TestAPICheck/TestTextPropagation (0.00s)
    	api_checkers.go:293: harness.Probe not specified, skipping
    --- PASS: TestAPICheck/TestUnknownFormat (0.00s)
=== RUN   TestTracer
--- PASS: TestTracer (0.01s)
	graph.go:43: got 4 events
	graph.go:252: Total 4 nodes, 3 edges checked
=== RUN   TestBinaryExtract
--- PASS: TestBinaryExtract (0.00s)
=== RUN   TestBinaryInject
--- PASS: TestBinaryInject (0.00s)
=== RUN   TestTextMapExtract
--- PASS: TestTextMapExtract (0.00s)
=== RUN   TestSpanBaggageUnsampled
--- PASS: TestSpanBaggageUnsampled (0.00s)
PASS
coverage: 100.0% of statements
ok  	github.com/appoptics/appoptics-apm-go/v1/ao/opentracing	1.151s
~/go/src/github.com/appoptics/appoptics-apm-go/v1/ao
